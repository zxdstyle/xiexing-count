Vue.http.options.emulateJSON=!0;var vm1=new Vue({el:"#mCalculation",components:{},data:function(){return{beginShow:!1,subjectShow:!1,stepData:[1,2,3,4,5,6,7,8,9,10,11],step:1,errorShow:!1,errorText:"您还未完成选填",errorClean:null,timer:2,isInput:!1,isClick:!1,isBack:!1,calcData:{step1:{isShow:!1,text:"请选择",seleteIndex:[],yearData:[{text:"1959",value:"1959"},{text:"1960",value:"1960"},{text:"1961",value:"1961"},{text:"1962",value:"1962"},{text:"1963",value:"1963"},{text:"1964",value:"1964"},{text:"1965",value:"1965"},{text:"1966",value:"1966"},{text:"1967",value:"1967"},{text:"1968",value:"1968"},{text:"1969",value:"1969"},{text:"1970",value:"1970"},{text:"1971",value:"1971"},{text:"1972",value:"1972"},{text:"1973",value:"1973"},{text:"1974",value:"1974"},{text:"1975",value:"1975"},{text:"1976",value:"1976"},{text:"1977",value:"1977"},{text:"1978",value:"1978"},{text:"1979",value:"1979"},{text:"1980",value:"1980"},{text:"1981",value:"1981"},{text:"1982",value:"1982"},{text:"1983",value:"1983"},{text:"1984",value:"1984"},{text:"1985",value:"1985"},{text:"1986",value:"1986"},{text:"1987",value:"1987"},{text:"1988",value:"1988"},{text:"1989",value:"1989"},{text:"1990",value:"1990"},{text:"1991",value:"1991"},{text:"1992",value:"1992"},{text:"1993",value:"1993"},{text:"1994",value:"1994"},{text:"1995",value:"1995"},{text:"1996",value:"1996"},{text:"1997",value:"1997"},{text:"1998",value:"1998"},{text:"1999",value:"1999"},{text:"2000",value:"2000"},{text:"2001",value:"2001"}],monthData:[{text:"1",value:"1"},{text:"2",value:"2"},{text:"3",value:"3"},{text:"4",value:"4"},{text:"5",value:"5"},{text:"6",value:"6"},{text:"7",value:"7"},{text:"8",value:"8"},{text:"9",value:"9"},{text:"10",value:"10"},{text:"11",value:"11"},{text:"12",value:"12"}]},step2:{isShow:!1,data:[{key:"below_high_school",value:"高中（中职）及以下"},{key:"college",value:"大专（高职）学历"},{key:"bachelor",value:"大学本科学历"},{key:"bachelor_degree",value:"本科学历+学士学位"},{key:"master",value:"硕士学历学位双证"},{key:"doctor",value:"博士学历学位双证"}],record:[{value:1,text:"全日制"},{value:2,text:"非全日制"}],seleteTit:"请选择",seleteRecord:0,seleteIndex:0},step3:{isShow:!1,data:[{key:"level_5",value:"国家职业资格五级"},{key:"level_4",value:"国家职业资格四级"},{key:"level_3",value:"国家职业资格三级"},{key:"level_2",value:"国家职业资格二级或中级职称"},{key:"level_1",value:"国家职业资格一级或高级职称"},{key:"level_0",value:"以上皆无"}],isSelete:[{value:1,text:"是"},{value:0,text:"否"}],level:"",seleteIndex:0,seleteTit:"请选择",level_4_5_needed:void 0},step4:{isShow:!1,seleteRadio:void 0,year:""},step5:{isShow:!1,data:[{key:"level_1",value:"每月缴纳金额在517.3~689.6元之间"},{key:"level_2",value:"4年累计36个月每月缴纳金额689.7~862.1元"},{key:"level_3",value:"4年累计36个月每月缴纳金额862.2~1724.2元"},{key:"level_4",value:"4年累计36个月每月缴纳金额1724.3~2586.4元"},{key:"level_5",value:"3年累计24个月每月缴纳金额2586.5元"},{key:"level_0",value:"未缴纳社保"}]},step6:{isShow:!1,data:[{key:"level_1",value:"获得本市部、委、办、局等级专项型奖励"},{key:"level_2",value:"获得本市部、委、办、局等级综合型奖励"},{key:"level_3",value:"获得省部级及以上政府表彰奖励"},{key:"level_0",value:"以上皆无"}]},step7:{isShow:!1,seleteRadio:void 0,share_ratio:"",tax_amount:"",employees_num:""},step8:{isShow:!1,data:[{key:"interface1",value:"满足入驻经备案的科技企业孵化器中满6个月且入驻前持股比例不低于5%"},{key:"interface2",value:"在经备案的本市技术转移服务机构中连续从事技术转移和科技成果转化满6个月"},{key:"interface0",value:"以上皆无"}],seleteRadio:""},step9:{isShow:!1,data:[{key:"needed1",value:"全日制应届高校大学生",checked:!1,disabled:!1},{key:"needed2",value:"全日制大专毕业且所学专业为紧缺急需专业",checked:!1,disabled:!1},{key:"needed0",value:"以上皆无",checked:!1,disabled:!1}]},step10:{isShow:!1,seleteRadio:void 0,port_work:"",sanitation_work:""},step11:{isShow:!1,data:[{key:"violation2",value:"近5年内有行政拘留记录",value1:"年",text:"",isShow:!0,checked:!1},{key:"violation1",value:"最近3年内申请积分时提供虚假材料",value1:"次",text:"",isShow:!0,checked:!1},{key:"violation0",value:"以上皆无",value1:"",isShow:!1,checked:!1}]}},seleteCalc:{sub1:{which:"p1",answer:"",integral:"",url:"",token:""},sub2:{which:"p2",answer:"",integral:"",token:""},sub3:{which:"p3",answer:"",integral:"",token:""},sub4:{which:"p4",answer:"",integral:"",token:""},sub5:{which:"p5",answer:"",integral:"",token:""},sub6:{which:"p6",answer:"",integral:"",token:""},sub7:{which:"p7",answer:"",integral:"",token:""},sub8:{which:"p8",answer:"",integral:"",token:""},sub9:{which:"p9",answer:"",integral:"",token:""},sub10:{which:"p10",answer:"",integral:"",token:""},sub11:{which:"p11",answer:"",integral:"",token:""},sub12:{which:"p12",tel:"",score:0,name:"未知",img_code:"",integral:"",token:"",source:2==window.location.href.split("?").length?window.location.href.split("?")[1]:null==window.localStorage.getItem("source")||"null"==window.localStorage.getItem("source")?"":window.localStorage.getItem("source"),sourceChange:{},url:window.location.href,old_url:null==localStorage.getItem("enterUrl")?location.href:localStorage.getItem("enterUrl")}},img_yzm:null,successInfo:{maskShow:!1,successShow1:!1,successShow2:!1,name:"",nameError:"",nameErrorShow:!1,phone:"",phoneError:"",phoneErrorShow:!1,time:5,msgtipTime:null,imgShow:!1},skip:"直接跳下一步",point:new Point.default,openId:"",swanid:"",calcHeight:0,isHeight:!1,isBegin:!1,boxHeight:0,kongHeight:0,headH:0,kongH:0,navH:0,noLayout:location.pathname.indexOf("wxapp")>-1,isMini:!1}},mounted:function(){this.point.reward="level_0",this.calcData.step7.seleteRadio=0,this.calcData.step8.seleteRadio="interface0",this.calcData.step9.data[2].checked=!0,this.calcData.step10.seleteRadio=0,this.calcData.step11.data[2].checked=!0,this.openId=this.getQueryString("openid"),this.swanid=this.getQueryString("swanid"),this.headH=document.getElementById("mHead")?document.getElementById("mHead").offsetHeight:0,this.kongH=document.getElementById("ft")?document.getElementById("ft").offsetHeight:0,this.navH=this.noLayout?0:document.getElementById("nav").offsetHeight,this.calcHeight=this.getWindowHeight()-this.headH-this.kongH-this.navH,this.kongHeight=document.getElementById("kong")?document.getElementById("kong").offsetHeight:0,this.openId?(this.subjectShow=!0,this.calcData.step1.isShow=!0):document.querySelector(".section1").offsetHeight+document.querySelector(".btn").offsetHeight>this.calcHeight?this.isBegin=!0:this.isBegin=!1},watch:{isInput(val){val?(document.querySelector("#mFooter").querySelector(".section_2").style.opacity=0,document.querySelector("#mFooter").querySelector(".section_2").zIndex="-1"):(document.querySelector("#mFooter").querySelector(".section_2").style.opacity=1,document.querySelector("#mFooter").querySelector(".section_2").zIndex="1")}},created:function(){},methods:{getWindowHeight:function(){var w=window,d=document,e=d.documentElement,g=d.getElementsByTagName("body")[0],y;return w.innerHeight||e.clientHeight||g.clientHeight},beginFun:function(){this.beginShow=!this.beginShow,this.subjectShow=!this.subjectShow,this.calcData.step1.isShow=!0,this.calcHeight=this.getWindowHeight()-this.headH-this.kongH-this.navH,this.boxHeight=document.getElementById("step1").offsetHeight+this.kongHeight+document.querySelector(".btn").offsetHeight,this.isBegin=!1,this.boxHeight>this.calcHeight?this.isHeight=!0:this.isHeight=!1},getQueryString:function(name){var reg=new RegExp("(^|&)"+name+"=([^&]*)(&|$)","i"),reg_rewrite=new RegExp("(^|/)"+name+"/([^/]*)(/|$)","i"),r=window.location.search.substr(1).match(reg),q=window.location.pathname.substr(1).match(reg_rewrite);return null!=r?unescape(r[2]):null!=q?unescape(q[2]):null},pickerFun:function(datas,idName,pickerValue,key,text){var picker1El=document.getElementById(idName).querySelector(".picker-text"),picker1=new Picker({data:[datas],selectedIndex:pickerValue&&key?[pickerValue[key]]:[0]});picker1.on("picker.select",(function(selectedVal,selectedIndex){picker1El.innerText=datas[selectedIndex].text,pickerValue&&text&&(pickerValue[text]=datas[selectedIndex].text)})),picker1.on("picker.change",(function(index,selectedIndex){})),picker1.on("picker.valuechange",(function(selectedVal,selectedIndex){pickerValue&&key&&(pickerValue[key]=selectedIndex[0])})),picker1.show()},agePicker:function(){this.radioChange();var _this=this,picker2El=document.getElementById("age").querySelector(".picker-text"),picker2=new Picker({data:[_this.calcData.step1.yearData,_this.calcData.step1.monthData],selectedIndex:null==_this.calcData.step1.selectedIndex?[26,0]:_this.calcData.step1.selectedIndex});picker2.on("picker.select",(function(selectedVal,selectedIndex){picker2El.innerText=_this.calcData.step1.yearData[selectedIndex[0]].text+" 年 "+_this.calcData.step1.monthData[selectedIndex[1]].text+" 月"})),picker2.on("picker.change",(function(index,selectedIndex){})),picker2.on("picker.valuechange",(function(selectedVal,selectedIndex){_this.calcData.step1.text=selectedVal,_this.calcData.step1.selectedIndex=selectedIndex})),picker2.show()},recordPicker:function(){this.radioChange(),this.pickerFun(this.calcData.step2.record,"record",this.calcData.step2,"seleteIndex","seleteTit")},professionalPicker:function(){this.radioChange(),this.pickerFun(this.calcData.step3.isSelete,"professional",this.calcData.step3,"seleteIndex","seleteTit")},radioValue:function(data,selete){var answer="";return data.forEach((function(item){item.key==selete&&(answer=item.value)})),answer},answerFun:function(data,obj1,obj2,id,next){var url="";url=this.openId?"/site/wxcounter":"/counter",this.$http.post(url,{data:data,_token:document.getElementsByTagName("meta")["csrf-token"].getAttribute("content")}).then((function(res){}),(function(err){console.log(err)})),this.isHeight=!1,this.calcHeight=this.getWindowHeight()-this.headH-this.kongH-this.navH,obj1.isShow=!1,obj2.isShow=!0,this.boxHeight=document.getElementById(id).offsetHeight+this.kongHeight+document.querySelector(".btn").offsetHeight,this.boxHeight>this.calcHeight?this.isHeight=!0:this.isHeight=!1,this.step=next?"不跳下一步"==next?6:this.step+2:this.step+1},upFun:function(obj1,obj2,id,next){obj1.isShow=!0,obj2.isShow=!1,this.step=next?this.step-2:this.step-1,this.stepHeight=document.getElementById(id).offsetHeight},radioC:function(id){var _this=this;this.radioChange(),setTimeout((function(){_this.boxHeight=document.getElementById(id).offsetHeight+_this.kongHeight+document.querySelector(".btn").offsetHeight,_this.boxHeight>_this.calcHeight?_this.isHeight=!0:_this.isHeight=!1}),20)},randomNum:function(){for(var rand="",i=0;i<3;i++){var r;rand+=Math.floor(10*Math.random())}return rand="jfm"+(new Date).getTime()+rand},subject1:function(){var nowData=new Date,year=nowData.getFullYear(),month=nowData.getMonth()+1,age=0;this.calcData.step1.isShow&&("请选择"==this.calcData.step1.text?this.showmsg():(this.openId?(this.swanid?this.seleteCalc.sub1.url="baidu-app":this.seleteCalc.sub1.url="wechat-app",this.seleteCalc.sub1.token=this.openId):(this.seleteCalc.sub1.url=window.location.href,this.isBack?this.seleteCalc.sub1.integral=this.seleteCalc.sub1.integral:this.seleteCalc.sub1.integral=this.randomNum()),age=this.calcData.step1.text[1]>month?year-this.calcData.step1.text[0]-1:year-this.calcData.step1.text[0],this.point.age=age>=18&&age<=43?18:age,this.seleteCalc.sub1.answer=age,this.answerFun(this.seleteCalc.sub1,this.calcData.step1,this.calcData.step2,"step2")))},up2:function(){this.isBack=!0,this.upFun(this.calcData.step1,this.calcData.step2,"step1")},subject2:function(){this.calcData.step2.isShow&&(this.point.education&&"请选择"!=this.calcData.step2.seleteTit?(this.calcData.step2.seleteRecord=this.calcData.step2.record[this.calcData.step2.seleteIndex].value,"bachelor"!=this.point.education&&"bachelor_degree"!=this.point.education&&"master"!=this.point.education&&"doctor"!=this.point.education||1==this.calcData.step2.seleteRecord&&(this.calcData.step9.data[1].disabled=!0),"below_high_school"!=this.point.education&&2!=this.calcData.step2.seleteRecord||(this.calcData.step9.data[0].disabled=!0,this.calcData.step9.data[1].disabled=!0),this.seleteCalc.sub2.answer=this.calcData.step2.seleteTit+"-"+this.radioValue(this.calcData.step2.data,this.point.education),this.openId?this.seleteCalc.sub2.token=this.openId:this.seleteCalc.sub2.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub2,this.calcData.step2,this.calcData.step3,"step3")):this.showmsg())},up3:function(){this.upFun(this.calcData.step2,this.calcData.step3,"step2")},subject3:function(){if(this.calcData.step3.isShow)if(""==this.calcData.step3.level)this.showmsg();else{if(this.calcData.step3.level_4_5_needed=this.calcData.step3.isSelete[this.calcData.step3.seleteIndex].value,"level_2"==this.calcData.step3.level||"level_1"==this.calcData.step3.level){if("请选择"==this.calcData.step3.seleteTit)return void this.showmsg();this.point.professional_skills={level:this.calcData.step3.level,level_4_5_needed:this.calcData.step3.level_4_5_needed};var level_4_5_needed_text=0==this.calcData.step3.level_4_5_needed?"否":"是";this.seleteCalc.sub3.answer=this.radioValue(this.calcData.step3.data,this.point.professional_skills.level)+"-"+level_4_5_needed_text}else this.point.professional_skills={level:this.calcData.step3.level},this.seleteCalc.sub3.answer=this.radioValue(this.calcData.step3.data,this.point.professional_skills.level);this.openId?this.seleteCalc.sub3.token=this.openId:this.seleteCalc.sub3.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub3,this.calcData.step3,this.calcData.step4,"step4")}},up4:function(){this.upFun(this.calcData.step3,this.calcData.step4,"step3")},subject4:function(){if(this.calcData.step4.isShow)if(null==this.calcData.step4.seleteRadio)this.showmsg();else if(this.point.social_security=0==this.calcData.step4.seleteRadio?0:this.calcData.step4.year,1==this.calcData.step4.seleteRadio){if(""==this.point.social_security)return this.errorText="填入值不能为空",void this.showmsg();if(isNaN(this.point.social_security))return this.errorText="填入值必须为数字",void this.showmsg();this.seleteCalc.sub4.answer=this.point.social_security,this.openId?this.seleteCalc.sub4.token=this.openId:this.seleteCalc.sub4.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub4,this.calcData.step4,this.calcData.step5,"step5")}else this.seleteCalc.sub4.answer="否",this.openId?this.seleteCalc.sub4.token=this.openId:this.seleteCalc.sub4.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub4,this.calcData.step4,this.calcData.step6,"step6",this.skip),""==!this.seleteCalc.sub5.answer&&(this.point.hign_social_security=void 0,this.seleteCalc.sub5.answer="(未设置)",this.answerFun(this.seleteCalc.sub5,this.calcData.step4,this.calcData.step6,"step6","不跳下一步"))},up5:function(){this.upFun(this.calcData.step4,this.calcData.step5,"step4")},subject5:function(){this.calcData.step5.isShow&&(this.point.hign_social_security?(this.seleteCalc.sub5.answer=this.radioValue(this.calcData.step5.data,this.point.hign_social_security),this.openId?this.seleteCalc.sub5.token=this.openId:this.seleteCalc.sub5.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub5,this.calcData.step5,this.calcData.step6,"step6")):this.showmsg())},up6:function(){1==this.calcData.step4.seleteRadio?this.upFun(this.calcData.step5,this.calcData.step6,"step5"):this.upFun(this.calcData.step4,this.calcData.step6,"step4",this.skip)},subject6:function(){this.calcData.step6.isShow&&(this.point.reward?(this.seleteCalc.sub6.answer=this.radioValue(this.calcData.step6.data,this.point.reward),this.openId?this.seleteCalc.sub6.token=this.openId:this.seleteCalc.sub6.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub6,this.calcData.step6,this.calcData.step7,"step7")):this.showmsg())},up7:function(){this.upFun(this.calcData.step6,this.calcData.step7,"step6")},subject7:function(){if(this.calcData.step7.isShow)if(null==this.calcData.step7.seleteRadio)this.showmsg();else{if(0==this.calcData.step7.seleteRadio)this.point.business={type:this.calcData.step7.seleteRadio},this.seleteCalc.sub7.answer="否";else{if(""==this.calcData.step7.share_ratio||""==this.calcData.step7.tax_amount||""==this.calcData.step7.employees_num)return this.errorText="填入值不能为空",void this.showmsg();if(isNaN(this.calcData.step7.share_ratio)||isNaN(this.calcData.step7.tax_amount)||isNaN(this.calcData.step7.employees_num))return this.errorText="填入值必须为数字",void this.showmsg();if(this.calcData.step7.share_ratio>100)return this.errorText="持股值不能大于100",void this.showmsg();if(this.calcData.step7.employees_num%1!=0)return this.errorText="户籍员工人数为整数",void this.showmsg();this.point.business={type:this.calcData.step7.seleteRadio,share_ratio:this.calcData.step7.share_ratio,tax_amount:this.calcData.step7.tax_amount,employees_num:this.calcData.step7.employees_num},this.seleteCalc.sub7.answer="在企业内持股"+this.calcData.step7.share_ratio+"%，最近3年内平均每年纳税"+this.calcData.step7.tax_amount+"万元，每年雇上海户籍员工"+this.calcData.step7.employees_num+"人。"}this.openId?this.seleteCalc.sub7.token=this.openId:this.seleteCalc.sub7.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub7,this.calcData.step7,this.calcData.step8,"step8")}},up8:function(){this.upFun(this.calcData.step7,this.calcData.step8,"step7")},subject8:function(){this.calcData.step8.isShow&&(""==this.calcData.step8.seleteRadio?this.showmsg():(this.point.innovative_entrepreneurial_talent={innovation:"interface1"==this.calcData.step8.seleteRadio?1:0,entrepreneurship:"interface2"==this.calcData.step8.seleteRadio?1:0},this.seleteCalc.sub8.answer=this.radioValue(this.calcData.step8.data,this.calcData.step8.seleteRadio),this.calcData.step9.data[0].disabled&&this.calcData.step9.data[1].disabled?(this.openId?this.seleteCalc.sub8.token=this.openId:this.seleteCalc.sub8.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub8,this.calcData.step8,this.calcData.step10,"step10",this.skip)):(this.openId?this.seleteCalc.sub8.token=this.openId:this.seleteCalc.sub8.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub8,this.calcData.step8,this.calcData.step9,"step9"))))},neededFun(item){var _this=this;this.radioChange(),item.checked?item.checked=!1:item.checked=!0,"needed0"==item.key?this.calcData.step9.data.forEach((function(list){item.key!=list.key&&(list.checked=!1,list.text="")})):this.calcData.step9.data[2].checked=!1},up9:function(){this.upFun(this.calcData.step8,this.calcData.step9,"step8")},subject9:function(){var _this=this,selectedList=[];this.calcData.step9.isShow&&(this.calcData.step9.data.forEach((function(item){item.checked&&(selectedList.push(item),"needed0"==item.key?_this.seleteCalc.sub9.answer=item.value:_this.seleteCalc.sub9.answer+=item.value+"、")})),selectedList.length?(this.point.needed_professional={needed_professional:this.calcData.step9.data[0].checked?1:0,graduation:this.calcData.step9.data[1].checked?1:0},this.openId?this.seleteCalc.sub9.token=this.openId:this.seleteCalc.sub9.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub9,this.calcData.step9,this.calcData.step10,"step10")):this.showmsg())},up10:function(){this.calcData.step9.data[0].disabled&&this.calcData.step9.data[1].disabled?this.upFun(this.calcData.step8,this.calcData.step10,"step8",this.skip):this.upFun(this.calcData.step9,this.calcData.step10,"step9")},subject10:function(){if(this.calcData.step10.isShow)if(null==this.calcData.step10.seleteRadio)this.showmsg();else{if(1==this.calcData.step10.seleteRadio){if(""==this.calcData.step10.port_work&&""==this.calcData.step10.sanitation_work)return this.errorText="填入值不能为空",void this.showmsg();if(isNaN(this.calcData.step10.port_work)||isNaN(this.calcData.step10.sanitation_work))return this.errorText="填入值必须为数字",void this.showmsg();this.seleteCalc.sub10.answer="在临港地区工作并居住证，满"+this.calcData.step10.port_work+"年，在上海市环卫领域服务，满"+this.calcData.step10.sanitation_work+"年。"}else this.seleteCalc.sub10.answer="否";this.point.hard_word={port_work:0==this.calcData.step10.seleteRadio?0:this.calcData.step10.port_work,sanitation_work:0==this.calcData.step10.seleteRadio?0:this.calcData.step10.sanitation_work},this.openId?this.seleteCalc.sub10.token=this.openId:this.seleteCalc.sub10.integral=this.seleteCalc.sub1.integral,this.answerFun(this.seleteCalc.sub10,this.calcData.step10,this.calcData.step11,"step11")}},violationFun:function(item){var _this=this;this.radioChange(),item.checked?(item.checked=!1,item.text=""):item.checked=!0,"violation0"==item.key?this.calcData.step11.data.forEach((function(list){item.key!=list.key&&(list.checked=!1,list.text="")})):this.calcData.step11.data[2].checked=!1},up11:function(){this.upFun(this.calcData.step10,this.calcData.step11,"step10")},subject11:function(){var _this=this,selectedList=[],isEnd=!1;if(this.calcData.step11.isShow){if(this.calcData.step11.data.forEach((function(item){if(item.checked){if(selectedList.push(item),item.isShow){if(""==item.text)return _this.errorText="填入值不能为空",_this.showmsg(),void(isEnd=!0);if(isNaN(item.text))return _this.errorText="填入值必须为数字",_this.showmsg(),void(isEnd=!0);isEnd=!1,_this.seleteCalc.sub11.answer+=item.value+item.text+item.value1+"、"}else _this.seleteCalc.sub11.answer=item.value;_this.openId?_this.seleteCalc.sub11.token=_this.openId:_this.seleteCalc.sub11.integral=_this.seleteCalc.sub1.integral}})),!selectedList.length)return void this.showmsg();if(this.point.violation_of_law={false_material:this.calcData.step11.data[1].checked?this.calcData.step11.data[1].text:0,detention:this.calcData.step11.data[0].checked?this.calcData.step11.data[0].text:0},!isEnd)if(this.openId){if(this.isMini)return;this.isMini=!0,this.$http.post("/site/wxcounter",{data:this.seleteCalc.sub11,_token:document.getElementsByTagName("meta")["csrf-token"].getAttribute("content")}).then((function(res){}),(function(err){this.isMini=!1}));var score=this.point.total_point;this.swanid?swan.webView.navigateTo({url:"/pages/phone/phone?score="+score}):wx.miniProgram.navigateTo({url:"/pages/index/phone?score="+score})}else this.$http.post("/counter",{data:this.seleteCalc.sub11,_token:document.getElementsByTagName("meta")["csrf-token"].getAttribute("content")}).then((function(res){1==res.data.status&&(this.successInfo.imgShow=!1,this.successInfo.maskShow=!0,this.successInfo.successShow1=!0)}),(function(err){console.log(err)}))}},showmsg:function(){var _this=this;this.errorShow=!0,_this.errorClean=setInterval((function(){_this.timer=_this.timer-1,0==_this.timer&&_this.radioChange()}),1e3)},radioChange:function(){clearInterval(this.errorClean),this.errorShow=!1,this.timer=2},validatePhone:function(phone){var mobile=/^1[3456789]\d{9}$/;return""==this.successInfo.phone?(this.successInfo.phoneError="*联系方式不能为空",this.successInfo.phoneErrorShow=!0,!1):!!mobile.test(this.successInfo.phone)||(this.successInfo.phoneError="*请填写正确格式",this.successInfo.phoneErrorShow=!0,!1)},phoneBlur:function(){this.validatePhone(this.successInfo.phone)},submit1:function(){var vm=this,key="",value="";if(""==this.successInfo.name)this.successInfo.nameError="*称呼未填写",this.successInfo.nameErrorShow=!0;else if(this.validatePhone(this.successInfo.phone)){if(this.isClick)return;this.isClick=!0,this.seleteCalc.sub12.name=""==this.successInfo.name?"未知":this.successInfo.name,this.seleteCalc.sub12.tel=this.successInfo.phone,this.seleteCalc.sub12.score=this.point.total_point,this.seleteCalc.sub12.integral=this.seleteCalc.sub1.integral,this.seleteCalc.sub12=commonForm.prepareData(this.seleteCalc.sub12),this.$http.post("/counter",{data:this.seleteCalc.sub12,_token:document.getElementsByTagName("meta")["csrf-token"].getAttribute("content")}).then((function(res){1==res.data.img_code?this.$http.post("/site/img-code",{_token:document.getElementsByTagName("meta")["csrf-token"].getAttribute("content")}).then((function(data){this.img_yzm=data.data,this.successInfo.imgShow=!0,this.isClick=!1})):(this.successInfo.successShow1=!1,this.successInfo.successShow2=!0,this.submit2(),this.successInfo.name="",this.successInfo.phone="",this.seleteCalc.sub12.img_code="",this.successInfo.nameErrorShow=!1,this.successInfo.phoneErrorShow=!1,this.isClick=!1)}),(function(err){console.log(err)}))}},yzmFun:function(){this.$http.post("/site/img-code",{_token:document.getElementsByTagName("meta")["csrf-token"].getAttribute("content")}).then((function(data){this.img_yzm=data.data}))},submit2:function(){var _this=this;this.successInfo.msgtipTime=setInterval((function(){_this.successInfo.time=_this.successInfo.time-1,0==_this.successInfo.time&&(_this.noLayout||(location.href="/"))}),1e3)},endSubmit:function(){window.location.reload()},successClose:function(){this.noLayout?window.location.reload():location.href="/"}}});